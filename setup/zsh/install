#!/bin/bash

echo 'Installing Zsh...'
sudo apt-get -y install zsh

echo 'Installing Prezto, configuration framework for Zsh...'
if [[ ! -d ~/.zprezto ]]; then
  git clone --recursive https://github.com/sorin-ionescu/prezto.git ~/.zprezto
fi

echo 'Setting up .zshrc...'
if [[ ! -f $HOME/.zshrc ]];then
  cp ${ROBOTIC_PATH}/compsys/setup/zsh/zshrc ${HOME}/.zshrc
fi

if [[ ! -f ${HOME}/.zpreztorc ]]; then
  ln -s ${ROBOTIC_PATH}/compsys/setup/zsh/zpreztorc ${HOME}/.zpreztorc
fi

if [[ ! -f ${HOME}/.zprezto/modules/prompt/functions/prompt_mcgill_setup ]]; then
  ln -s ${ROBOTIC_PATH}/compsys/setup/zsh/prompt_mcgill_setup ${HOME}/.zprezto/modules/prompt/functions/prompt_mcgill_setup
fi

echo 'Setting up Fasd...'
if [[ ! -f /usr/bin/fasd ]]; then
  sudo wget https://raw.githubusercontent.com/clvv/fasd/master/fasd -P /usr/bin
  sudo chmod +x /usr/bin/fasd
fi

echo 'Switching default login shell...'
echo 'You need logout and login to reflect the changes.'
if [[ ${SHELL} != '/bin/zsh' ]]; then
  chsh -s /bin/zsh
fi

echo 'Done.'
echo
