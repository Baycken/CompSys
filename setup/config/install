#!/bin/bash

config=$"
#################################################################### \n
# \n
# MCGILL ROBOTICS PERSONAL CONFIGURATION \n
# \n
# The following can be personalized to your liking. \n
# EDITOR        Your text editor of choice. \n
# ROBOT         Team you are working on ('auv' or 'rover'). \n
# IAMROBOT      If computer will be shared ('true' or 'false'). \n
# ROBOTIC_PATH  Absolute path to directory containing the local \n
#               McGill Robotics git repositories. \n
#################################################################### \n\n
export EDITOR=vim \n
export ROBOT=$ROBOT \n
export IAMROBOT=$IAMROBOT \n
export ROBOTIC_PATH=$ROBOTIC_PATH \n
source "'$ROBOTIC_PATH'"/compsys/roboticrc \n
"

echo 'UPDATING SHELL RC FILES'
for rcfile in "$HOME/.bashrc" "$HOME/.zshrc"
do
    if [ -f $rcfile ]
    then
        if [[ -z `grep "export ROBOT=" $rcfile` ]]
        then
            echo "updating $rcfile"
            echo -e $config >> $rcfile
        fi
    fi
done

echo 'ADDING OTHER CONFIGURATION FILES'
for rcfile in "vimrc" "tmux.conf"
do
    if [ ! -f $HOME/.$rcfile ]
    then
        echo "adding $HOME/.$rcfile"
        ln -s $ROBOTIC_PATH/compsys/setup/config/$rcfile $HOME/.$rcfile
    fi
done

echo 'SETTING UP VIM FOR USE'
if [ ! -d $HOME/.vim/bundle/Vundle.vim ]
then
    git clone https://github.com/gmarik/Vundle.vim.git ~/.vim/bundle/Vundle.vim
fi
vim +PluginInstall +qall

echo 'DONE'
echo
